## アノテーション一覧

| アノテーション型                                             | 説明                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [AssertFalse](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/AssertFalse.html) | アノテーション付き要素は false でなければなりません。        |
| [AssertFalse.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/AssertFalse.List.html) | 同じ要素に複数の [`AssertFalse`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/AssertFalse.html) アノテーションを定義します。 |
| [AssertTrue](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/AssertTrue.html) | アノテーション付き要素は true でなければなりません。         |
| [AssertTrue.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/AssertTrue.List.html) | 同じ要素に複数の [`AssertTrue`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/AssertTrue.html) アノテーションを定義します。 |
| [DecimalMax](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/DecimalMax.html) | アノテーション付き要素は、指定された最大値以下の値を持つ必要がある数値である必要があります。 |
| [DecimalMax.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/DecimalMax.List.html) | 同じ要素に複数の [`DecimalMax`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/DecimalMax.html) アノテーションを定義します。 |
| [DecimalMin](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/DecimalMin.html) | アノテーション付き要素は、指定された最小値以上の値を持つ必要がある数値である必要があります。 |
| [DecimalMin.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/DecimalMin.List.html) | 同じ要素に複数の [`DecimalMin`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/DecimalMin.html) アノテーションを定義します。 |
| [Digits](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Digits.html) | アノテーション付き要素は、許容範囲内の数値である必要があります。 |
| [Digits.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Digits.List.html) | 同じ要素に複数の [`Digits`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Digits.html) アノテーションを定義します。 |
| [Email](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Email.html) | 文字列は整形式のメールアドレスである必要があります。         |
| [Email.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Email.List.html) | 同じ要素に複数の `@Email` 制約を定義します。                 |
| [Future](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Future.html) | アノテーション付き要素は、インスタント、日付、または未来の時間である必要があります。 |
| [Future.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Future.List.html) | 同じ要素に複数の [`Future`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Future.html) アノテーションを定義します。 |
| [FutureOrPresent](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/FutureOrPresent.html) | アノテーション付き要素は、現在または未来のインスタント、日付、または時刻である必要があります。 |
| [FutureOrPresent.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/FutureOrPresent.List.html) | 同じ要素に複数の [`FutureOrPresent`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/FutureOrPresent.html) アノテーションを定義します。 |
| [Max](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Max.html) | アノテーション付き要素は、指定された最大値以下の値を持つ必要がある数値である必要があります。 |
| [Max.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Max.List.html) | 同じ要素に複数の [`Max`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Max.html) アノテーションを定義します。 |
| [Min](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Min.html) | アノテーション付き要素は、指定された最小値以上の値を持つ必要がある数値である必要があります。 |
| [Min.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Min.List.html) | 同じ要素に複数の [`Min`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Min.html) アノテーションを定義します。 |
| [Negative](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Negative.html) | アノテーション付きの要素は、厳密に負の数でなければなりません（つまり |
| [Negative.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Negative.List.html) | 同じ要素に複数の [`Negative`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Negative.html) 制約を定義します。 |
| [NegativeOrZero](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NegativeOrZero.html) | アノテーション付き要素は負の数または 0 でなければなりません。 |
| [NegativeOrZero.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NegativeOrZero.List.html) | 同じ要素に複数の [`NegativeOrZero`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NegativeOrZero.html) 制約を定義します。 |
| [NotBlank](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotBlank.html) | アノテーション付き要素は `null` であってはならず、空白文字以外の文字が少なくとも 1 つ含まれている必要があります。 |
| [NotBlank.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotBlank.List.html) | 同じ要素に複数の `@NotBlank` 制約を定義します。              |
| [NotEmpty](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotEmpty.html) | アノテーション付き要素は `null` または空であってはなりません。 |
| [NotEmpty.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotEmpty.List.html) | 同じ要素に複数の `@NotEmpty` 制約を定義します。              |
| [NotNull](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotNull.html) | アノテーション付き要素は `null` であってはなりません。       |
| [NotNull.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotNull.List.html) | 同じ要素に複数の [`NotNull`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/NotNull.html) アノテーションを定義します。 |
| [Null](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Null.html) | アノテーション付き要素は `null` でなければなりません。       |
| [Null.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Null.List.html) | 同じ要素に複数の [`Null`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Null.html) アノテーションを定義します。 |
| [Past](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Past.html) | アノテーション付き要素は、インスタント、日付、または過去の時間である必要があります。 |
| [Past.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Past.List.html) | 同じ要素に複数の [`Past`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Past.html) アノテーションを定義します。 |
| [PastOrPresent](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/PastOrPresent.html) | アノテーション付き要素は、過去または現在のインスタント、日付、または時刻である必要があります。 |
| [PastOrPresent.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/PastOrPresent.List.html) | 同じ要素に複数の [`PastOrPresent`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/PastOrPresent.html) アノテーションを定義します。 |
| [Pattern](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Pattern.html) | アノテーション付き `CharSequence` は、指定された正規表現と一致する必要があります。 |
| [Pattern.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Pattern.List.html) | 同じ要素に複数の [`Pattern`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Pattern.html) アノテーションを定義します。 |
| [Positive](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Positive.html) | アノテーション付きの要素は、厳密に正の数でなければなりません（つまり |
| [Positive.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Positive.List.html) | 同じ要素に複数の [`Positive`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Positive.html) 制約を定義します。 |
| [PositiveOrZero](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/PositiveOrZero.html) | アノテーション付き要素は正の数または 0 でなければなりません。 |
| [PositiveOrZero.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/PositiveOrZero.List.html) | 同じ要素に複数の [`PositiveOrZero`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/PositiveOrZero.html) 制約を定義します。 |
| [Size](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Size.html) | アノテーション付き要素のサイズは、指定された境界（含まれる）の間にある必要があります。 |
| [Size.List](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Size.List.html) | 同じ要素に複数の [`Size`](https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/Size.html) アノテーションを定義します。 |

https://spring.pleiades.io/specifications/platform/8/apidocs/javax/validation/constraints/package-summary.html

## 使用例

検証Beanの定義

```java
public class SampleDataParam {
  @NotBlank(message = "id cannot be blank")
  @Pattern(regexp="^[0-9]{6}$",message = {custom.message})
  private String id;
}
```

メッセージ管理

```properties
# src/resources/ValidationMessages.properties
custom.message=this is a message management
```

ハンドラー

```java
@PostMapping
//パラメータにBindingResultを定義する場合は、対応するモデルオブジェクトの直後に定義すること
public void create(@Validated SampleDataParam param, BindingResult result, Model model) {
  //エラーハンドリング処理
  if (result.hasError()) {
    //例：手動エラー追加
    FieldError fieldError = new FieldError(result.getObjectName(), "fieldName", "message");
    result.addError(fieldError);    
    return "pageName";
  }
}
```

## グループ化

```java
// グループ用インターフェース定義
public interface Insert {}
public interface Update{}
//グループを設定
@NotBlank(groups= { Insert.class })
private String id;
@NotBlank(groups= { Insert.class, Update.class })
private String name;
//グループを起動
@PostMapping
public void create(@Validated(Insert.class) Param param, BindingResult result, Model model) 
```

## カスタマイズ

インターフェース

```java
@Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE_USE})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = {MyConstraintValidator.class})
public @interface MyValid {
  String message() default "Invalid value";
  String format();
  Class<?>[] groups() default {};
  Class<? extends Payload>[] payload() default {}
}
```

実装クラス

```java
public class MyConstraintValidator implements ConstraintValidator<MyValid, String> {
  private String format;
  //初期化
  @Override
  public void initialize(MyValid myValid) {
    format = myValid.format();
  }
  //検証ロジックの実装
  @Override
  public boolean isValid(String value, ConstraintValidatorContext context) {
    try {
      DateTimeFormatter formatter = DateTimeFormatter
          							.ofPattern(format)
                                    .withResolverStyle(ResolverStyle.STRICT);
      LocalDate.parse(value, formatter);
      return true;
    } catch(DateTimeException e) {
      return false;
    }
  }
}
```

使用例

```java
@MyValid(format="uuuuMMdd")
private String date;
```

## 参考資料

https://b1san-blog.com/post/spring/spring-validation/