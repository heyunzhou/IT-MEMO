""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Set Handlers
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
sethandler <S-Tab> a:vim
sethandler <C-A> a:ide
sethandler <C-B> a:ide
sethandler <C-C> a:ide
sethandler <C-D> a:ide
sethandler <C-E> a:ide
sethandler <C-F> a:ide
sethandler <C-G> a:ide
sethandler <C-H> a:vim
sethandler <C-I> a:ide
sethandler <C-J> a:ide
sethandler <C-K> a:vim
sethandler <C-L> a:vim
sethandler <C-M> a:vim
sethandler <C-N> a:ide
sethandler <C-O> a:vim
sethandler <C-P> a:vim
sethandler <C-Q> a:ide
sethandler <A-Q> a:vim
sethandler <C-R> a:ide
sethandler <C-S> a:ide
sethandler <C-T> a:vim
sethandler <C-U> a:vim
sethandler <C-V> a:ide
sethandler <C-W> a:vim
sethandler <C-X> a:ide
sethandler <C-Y> a:vim
sethandler <C-[> a:ide
sethandler <C-\> a:vim
sethandler <C-]> a:vim

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" VIM Setting
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" https://github.com/JetBrains/ideavim
let mapleader=" "
set scrolloff=5
set incsearch
set hlsearch
nmap nh :noh<CR>
set ignorecase
set smartcase
set showcmd
set showmode
" ColorScheme>General>line number on caret row=DC2965
" ColorScheme>General>line number=60778E
set number
set relativenumber
set clipboard+=unnamed  " use the clipboards of vim and win
" Don't use Ex mode, use Q for formatting.
map Q gq
map <leader>9  :action IdeaVim.ReloadVimRc.reload<CR>
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" VIM PLUGINS
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
set ideajoin
set highlightedyank
"" PLUGIN
set ReplaceWithRegister
" gr doPaste

"" PLUGIN
set exchange
" X   Visual mode.On the first use, define the first {motion} to exchange. On the second use, define the second {motion} and perform the exchange.
" cxc Clear any {motion} pending for exchange.

"" PLUGIN
set surround
vmap " S"
vmap ' S'
" cs + old + new
" ds + tags
" vMode: S + tags

"" PLUGIN
set easymotion
map f <Plug>(easymotion-s2)
" <leader><leader> k jump up lines
" <leader><leader> j jump down lines

"" PLUGIN
set NERDTree
" Key	Description
" o		Open files, directories and bookmarks
" i		Open selected file in a split window
" s		Open selected file in a new vsplit
" x		Close the current nodes parent
" X		Recursively close all children of the current node
" P		Jump to the root node
" p		Jump to current nodes parent
" r		Recursively refresh the current directory
" m		Display the NERDTree menu
" q		Close the NERDTree window
" A		Zoom (maximize/minimize) the NERDTree window

"" PLUGIN
set commentary
" gcc switch comment
" gcu uncomment out all

" method comment
map <A-/> i/**<CR>
imap <A-/> /**<CR>

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Basic Mapping
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"" -- FOLD --
" zc fold
" C-> toggle fold
" zo open
" zM fold all
" zR open all
map zm zM
map zr zR

"" -- REPLACE --
nmap <leader>r yw:%s/<C-r>0/
vmap <leader>r :s/<C-r>0/

"" -- NORMAL MODE --
nmap <leader>p "0p
nmap <A-p> vwgr
nmap <C-p> Vgr
nmap vv <C-v>

nmap vw viw
nmap yw yiw
nmap cw ciw
nmap dw diw

nmap vb vib
nmap yb yib
nmap cb cib
nmap db dib

nmap vB viB
nmap yB yiB
nmap cB ciB
nmap dB diB

nmap v" vi"
nmap y" yi"
nmap c" ci"
nmap d" di"

nmap v' vi'
nmap y' yi'
nmap c' ci'
nmap d' di'

nmap n nzz
nmap N Nzz

nmap Y y$
"" -- Change Indent --
nmap > >>
nmap < <<
vmap > >gv
vmap < <gv

map H ^
map L $

nmap + <C-a>
vmap + g<C-a>
map - <C-x>
vmap - g<C-x>

nmap <C-H> <C-W>h
nmap <C-L> <C-W>l
nmap <Tab> gt
nmap <S-Tab> gT

map J 5j
map K 5k
"" -- INSERT MODE --
imap <C-k> <C-o>D<Right>
imap jj <ESC>

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Japanese
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
imap ｊｊ <ESC>
map ｄｄ dd
map ｙｙ yy
map ｃｃ cc
map ｓ s
map ｘ x
map ｐ p
map お o
map い i
map あ a
vmap い <ESC>i

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" IDEA ACTION
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" DEBUG
map <leader>w :action Debugger.AddToWatch<CR>
map <leader>b :action ToggleLineBreakpoint<CR>
map <leader>B :action Debugger.RemoveAllBreakpoints<CR>
" S-f9 debug
" S-f10 run
" C-S-f10 run class
" A-S-f10 run window
" C-f2 stop

" WINDOW
map <leader><Right> :action SplitVertically<CR>
map <leader><Left> :action MoveEditorToOppositeTabGroup<CR>
map <leader><Down> :action SplitHorizontally<CR>
map <leader>x :action CloseContent<CR>
map <leader>X :action ReopenClosedTab<CR>
map <leader>co :action CloseAllEditorsButActive<CR>
map <leader>ca :action CloseAllEditors<CR>
map <leader>os :action SelectInProjectView<CR>
map <leader>oe :action RevealIn<CR>
map <A-E> :action RecentLocations<CR>

" MULTIPLE-CURSORS
map <A-n> :action SelectNextOccurrence<CR>
imap <A-n> :action SelectNextOccurrence<CR>
map <A-x> :action UnselectPreviousOccurrence<CR>
imap <A-x> :action UnselectPreviousOccurrence<CR>
map <A-w> :action SelectAllOccurrences<CR>
imap <A-w> :action SelectAllOccurrences<CR>
" F3 move to next occurrence
" S-F3 move to previous occurrence

" REFACTOR
map ; :action EditorDuplicate<CR>
map <C-8> :action ReformatCode<CR>
imap <C-8> :action ReformatCode<CR>
map mn :action RenameFile<CR>
map me :action RenameElement<CR>
map ms :action ChangeSignature<CR>
map mc :action IntroduceConstant<CR>
map mf :action IntroduceField<CR>
map mp :action IntroduceParameter<CR>
map <A-q> :action IntroduceVariable<CR>
imap <A-q> :action IntroduceVariable<CR>
map <A-g> :action Generate<CR>
imap <A-g> :action Generate<CR>
map <A-s> :action SurroundWith<CR>
imap <A-s> :action SurroundWith<CR>
map <A-i> :action Inline<CR>
imap <A-i> :action Inline<CR>

" FIND FILE & ACTION
map <A-f> :action FindInPath<CR>
imap <A-f> :action FindInPath<CR>
map / :action Find<CR>
map ? :action Replace<CR>
map <A-r> :action ReplaceInPath<CR>
imap <A-r> :action ReplaceInPath<CR>
map <A-t> :action GotoTest<CR>
imap <A-t> :action GotoTest<CR>

map <leader>nc :action NewClass<CR>
map <leader>nd :action NewDir<CR>
map <leader>nf :action NewFile<CR>

map mm :action ToggleBookmark<CR>
map M :action ShowBookmarks<CR>
map ma mA


" alt+F7 FindUsages
map <leader>ch :action CallHierarchy<CR>
map <leader>gh :action Vcs.ShowTabbedFileHistory<CR>
map <leader>gH :action Vcs.ShowHistoryForBlock<CR>
map <leader>df :action CopyFileName<CR>
map <leader>dr :action CopyReference<CR>

" Macros
map vm @m
let @m =']MV%(' " select method
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" temp
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
map 99 v":action SearchEverywhere<CR>
